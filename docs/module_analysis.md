# 项目功能模块分析

本文件分析 `know_ledgebase` 项目主要功能模块的组成、各自的重要程度，并判断其是否具备独立运行测试用例的能力。

## 1. apps/
### 1.1 backend_service.py
- **功能**：FastAPI 后台服务，负责文档解析、向量构建等任务，调度核心服务。
- **重要性**：核心入口，极其重要。
- **可独立测试性**：可通过 FastAPI 的 TestClient 独立编写接口测试。

### 1.2 frontend_service.py
- **功能**：FastAPI 前台服务，负责检索、对话、会话管理等用户交互。
- **重要性**：核心入口，极其重要。
- **可独立测试性**：可通过 FastAPI 的 TestClient 独立编写接口测试。

## 2. services/
### 2.1 document_parser.py
- **功能**：文档解析任务调度与执行，支持 Docling/MinerU 等多种解析器。
- **重要性**：文档解析核心，重要。
- **可独立测试性**：可通过构造任务参数直接测试解析逻辑。

### 2.2 rag_service.py
- **功能**：RAG 检索、对话、召回等核心业务逻辑。
- **重要性**：检索与生成核心，极其重要。
- **可独立测试性**：可通过模拟检索请求、对话请求进行单元测试。

### 2.3 vector_store_builder.py
- **功能**：向量数据库构建与管理，支持多种后端（如 Faiss、PGVector）。
- **重要性**：向量存储核心，重要。
- **可独立测试性**：可通过构造向量任务参数直接测试。

## 3. common/
### 3.1 postgres_vector_store.py
- **功能**：PostgreSQL 向量存储适配与操作。
- **重要性**：数据库后端适配，重要。
- **可独立测试性**：可通过 mock 数据库参数进行单元测试。

## 4. models/
### 4.1 database.py
- **功能**：数据库连接、会话管理、模型注册。
- **重要性**：基础支撑模块，重要。
- **可独立测试性**：可通过数据库连接和表结构初始化进行测试。

## 5. config.py
- **功能**：全局配置项，集中管理环境变量和参数。
- **重要性**：全局配置，重要。
- **可独立测试性**：可直接导入并断言配置项。

---

## 结论与建议
- 以上模块均具备独立运行测试用例的能力，推荐为每个核心服务和工具类编写单元测试。
- apps 层建议通过接口测试，services/common/models 层建议通过单元测试。
- 配置文件可通过断言和环境变量覆盖测试。